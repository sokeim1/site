# üé¨ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–µ—Ä–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–ª–µ–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ –æ—à–∏–±–∫—É **404 Not Found**:
```
https://vibix.org/embed/id/518031  ‚ùå 404 Not Found
```

**–ü—Ä–∏—á–∏–Ω–∞:** –§–æ—Ä–º–∞—Ç URL `/embed/id/...` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ API Vibix.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–ª—É—á—à–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API

–¢–µ–ø–µ—Ä—å **–≤—Å–µ–≥–¥–∞** –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–∞ –∏–∑ API:
- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –ø–æ `kp_id` (–ö–∏–Ω–æ–ø–æ–∏—Å–∫ ID)
- –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å - –ø—Ä–æ–±—É–µ–º –ø–æ `imdb_id`
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ `iframe_url` —Å –≥–æ—Ç–æ–≤–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø–ª–µ–µ—Ä

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã fallback URL

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
```javascript
https://vibix.org/embed/kp/123456      // ‚úÖ –ö–∏–Ω–æ–ø–æ–∏—Å–∫ ID
https://vibix.org/embed/imdb/tt123456  // ‚úÖ IMDB ID
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (—É–¥–∞–ª–µ–Ω—ã):**
```javascript
https://vibix.org/embed/id/518031      // ‚ùå –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
https://vibix.org/embed/518031         // ‚ùå –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ–ª—É—á–µ–Ω–∏—è URL

1. **iframe_url** –∏–∑ API (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π)
2. **player_url** –∏–∑ API
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ kp_id**: `https://vibix.org/embed/kp/${kp_id}`
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ imdb_id**: `https://vibix.org/embed/imdb/${imdb_id}`
5. **–û—à–∏–±–∫–∞** –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç

## üéØ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5)
2. **–û—Ç–∫—Ä–æ–π –ª—é–±–æ–π —Ñ–∏–ª—å–º**
3. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å** (F12):

**–•–æ—Ä–æ—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
üîç Fetching detailed movie data by kp_id: 123456
‚úÖ Got detailed movie data: Object
‚úÖ Merged movie data with API response
‚úÖ Found iframe_url from API: https://...
üé¨ Final player URL: https://...
```

**–ü–ª–æ—Ö–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
‚ö†Ô∏è Could not fetch by kp_id
‚ö†Ô∏è Could not fetch by imdb_id
‚ùå No valid ID found for player URL
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ –ø–ª–µ–µ—Ä –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `iframe_url`:
```javascript
console.log(currentMovie.iframe_url);
```

**–®–∞–≥ 2:** –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ ID:
```javascript
console.log('kp_id:', currentMovie.kp_id);
console.log('imdb_id:', currentMovie.imdb_id);
```

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç API:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
console.log(currentMovie);
```

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### movie-details.js

**–ë—ã–ª–æ:**
```javascript
// –ü—Ä–æ—Å—Ç–æ –±—Ä–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
currentMovie = JSON.parse(storedMovie);
```

**–°—Ç–∞–ª–æ:**
```javascript
// –í—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
const detailedMovie = await movieAPI.getMovieByKpId(kp_id);
currentMovie = { ...currentMovie, ...detailedMovie.data };
```

### Fallback URLs

**–ë—ã–ª–æ:**
```javascript
https://vibix.org/embed/id/518031       // ‚ùå 404
https://vibix.org/embed/518031          // ‚ùå 404
```

**–°—Ç–∞–ª–æ:**
```javascript
https://vibix.org/embed/kp/123456       // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
https://vibix.org/embed/imdb/tt123456   // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–ª–µ–µ—Ä —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤ —Å `kp_id` –∏–ª–∏ `imdb_id`! üéâ

---

**P.S.** –ï—Å–ª–∏ —Ñ–∏–ª—å–º –Ω–µ –∏–º–µ–µ—Ç –Ω–∏ `kp_id`, –Ω–∏ `imdb_id`, –ø–ª–µ–µ—Ä –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API Vibix).
