# üîÑ –ü–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ v3 —Å kp_id –∏ iframe_url

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç–∞—Ä—ã–π –∏–Ω–¥–µ–∫—Å (v2) –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è:
- `kp_id` - Kinopoisk ID (–Ω—É–∂–µ–Ω –¥–ª—è –ø–ª–µ–µ—Ä–∞)
- `imdb_id` - IMDB ID
- `iframe_url` - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–µ–µ—Ä
- `quality`, `genre`, `country`, `backdrop_url` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–∏–ª—å–º –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ –ø–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `build-index.js` –¥–æ –≤–µ—Ä—Å–∏–∏ 3, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è.

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—é

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞

```bash
node build-index.js
```

### 2. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç

–°–∫—Ä–∏–ø—Ç:
1. –ó–∞–≥—Ä—É–∑–∏—Ç –ø–µ—Ä–≤—ã–µ 200 —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ API Vibix (~ 20,000 —Ñ–∏–ª—å–º–æ–≤)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç **–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤–∫–ª—é—á–∞—è `kp_id`, `imdb_id`, `iframe_url`
3. –°–æ–∑–¥–∞—Å—Ç 3 —Ñ–∞–π–ª–∞:
   - `movies-index.json` - –ø–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å (–±–æ–ª—å—à–æ–π)
   - `movies-index-minified.json` - –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
   - `js/prebuilt-index.js` - –≥–æ—Ç–æ–≤—ã–π JavaScript —Ñ–∞–π–ª

### 3. –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **~2-5 –º–∏–Ω—É—Ç** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è 200 —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ 100 —Ñ–∏–ª—å–º–æ–≤ = ~20,000 —Ñ–∏–ª—å–º–æ–≤

### 4. –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

**–í–µ—Ä—Å–∏—è 2 (—Å—Ç–∞—Ä–∞—è):**
- `js/prebuilt-index.js` - ~15-25 MB

**–í–µ—Ä—Å–∏—è 3 (–Ω–æ–≤–∞—è):**
- `js/prebuilt-index.js` - ~25-35 MB (–±–æ–ª—å—à–µ, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)

### 5. –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–ë—ã–ª–æ (v2):**
```javascript
{
  id: 737587,
  name_rus: "–°–∏–º–ø—Å–æ–Ω—ã",
  year: 1989,
  type: "serial",
  poster_url: "...",
  // ‚ùå –ù–ï–¢ kp_id, iframe_url!
}
```

**–°—Ç–∞–ª–æ (v3):**
```javascript
{
  id: 737587,
  name_rus: "–°–∏–º–ø—Å–æ–Ω—ã",
  year: 1989,
  kp_id: 306084,           // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  imdb_id: "tt0096697",    // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  iframe_url: "https://...", // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  type: "serial",
  poster_url: "...",
  backdrop_url: "...",     // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  quality: "HD",           // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  genre: ["–∫–æ–º–µ–¥–∏—è"],      // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
  country: ["–°–®–ê"]         // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ!
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞:
- ‚úÖ –ü–ª–µ–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** (< 100ms)
- ‚úÖ –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–∏–ª—å–º
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤ –∏–∑ –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ –ü–æ–∏—Å–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º
- ‚úÖ –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö (–∂–∞–Ω—Ä—ã, —Å—Ç—Ä–∞–Ω—ã, –∫–∞—á–µ—Å—Ç–≤–æ)

## üìä –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—è:**
```
üèóÔ∏è  BUILDING MOVIE INDEX...

üöÄ PHASE 1: Loading first 200 pages (all available movies)...
üìÑ Loading page 1...
üìÑ Loading page 2...
...
üìä Progress: 100% (19,847 movies indexed, 198 successful, 2 empty)

‚úÖ Indexing complete: 19,847 movies indexed from 198 pages

üíæ Saving index to file...
‚úÖ Index saved to movies-index.json (245.32 MB)
‚úÖ Minified index saved to movies-index-minified.json (28.45 MB)
‚úÖ JavaScript index saved to js/prebuilt-index.js

üéâ INDEX BUILD COMPLETE!
üìä Total movies indexed: 19,847
‚è±Ô∏è  Total time: 187.23 seconds
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–°—Ç–∞—Ä—ã–π –∏–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è** - —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ (–±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö)
3. **–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** –º–æ–∂–µ—Ç –±—ã—Ç—å —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–∑–∞–≥—Ä—É–∑–∫–∞ 28 MB –≤–º–µ—Å—Ç–æ 15 MB)
4. **–ù–æ –∑–∞—Ç–æ –ø–ª–µ–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!**

## üîÑ –ö–æ–≥–¥–∞ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å:
- **–†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é** - –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è API** - –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π** - –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd "C:\Users\sokeim –ª—É—á—à–∏–π\CascadeProjects\movie-site"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
node build-index.js

# –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (2-5 –º–∏–Ω—É—Ç)
# –ì–æ—Ç–æ–≤–æ! –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –≤—Å–µ —Ñ–∏–ª—å–º—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å `kp_id` –∏ `iframe_url`, –∏ –ø–ª–µ–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
