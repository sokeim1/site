<!-- 
    –ì–û–¢–û–í–´–ï –ö–û–î–´ –ê–ù–ê–õ–ò–¢–ò–ö–ò –î–õ–Ø –í–°–¢–ê–í–ö–ò –í <head>
    
    –ò–ù–°–¢–†–£–ö–¶–ò–Ø:
    1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ Google Analytics –∏ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ
    2. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–∏ ID
    3. –ó–∞–º–µ–Ω–∏—Ç–µ G-XXXXXXXXXX –∏ XXXXXXXX –Ω–∞ –≤–∞—à–∏ ID
    4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –±–ª–æ–∫ –Ω–∏–∂–µ
    5. –í—Å—Ç–∞–≤—å—Ç–µ –ü–ï–†–ï–î –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º </head> –≤:
       - index.html
       - movie-details.html
       - search.html (–µ—Å–ª–∏ –µ—Å—Ç—å)
-->

<!-- ========== GOOGLE ANALYTICS ========== -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  // –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  gtag('config', 'G-XXXXXXXXXX', {
    'send_page_view': true,
    'anonymize_ip': true // –ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è IP –¥–ª—è GDPR
  });
  
  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
  window.trackEvent = function(category, action, label, value) {
    gtag('event', action, {
      'event_category': category,
      'event_label': label,
      'value': value
    });
  };
</script>

<!-- ========== –Ø–ù–î–ï–ö–°.–ú–ï–¢–†–ò–ö–ê ========== -->
<script type="text/javascript">
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(XXXXXXXX, "init", {
        clickmap:true,           // –ö–∞—Ä—Ç–∞ –∫–ª–∏–∫–æ–≤
        trackLinks:true,         // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫
        accurateTrackBounce:true,// –¢–æ—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–æ–≤
        webvisor:true,           // –í–µ–±–≤–∏–∑–æ—Ä (–∑–∞–ø–∏—Å—å —Å–µ—Å—Å–∏–π)
        trackHash:true           // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ö—ç—à–∞ –≤ URL
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/XXXXXXXX" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ========== -->
<script>
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º
function trackMovieClick(movieTitle, movieId) {
    // Google Analytics
    if (typeof gtag !== 'undefined') {
        gtag('event', 'movie_click', {
            'movie_title': movieTitle,
            'movie_id': movieId
        });
    }
    
    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (typeof ym !== 'undefined') {
        ym(XXXXXXXX, 'reachGoal', 'movie_click', {
            title: movieTitle,
            id: movieId
        });
    }
    
    console.log('üìä Tracked movie click:', movieTitle);
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞
function trackSearch(query, resultsCount) {
    // Google Analytics
    if (typeof gtag !== 'undefined') {
        gtag('event', 'search', {
            'search_term': query,
            'results_count': resultsCount
        });
    }
    
    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (typeof ym !== 'undefined') {
        ym(XXXXXXXX, 'reachGoal', 'search', {
            query: query,
            results: resultsCount
        });
    }
    
    console.log('üìä Tracked search:', query, 'Results:', resultsCount);
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ
function trackVideoPlay(movieTitle, movieId) {
    // Google Analytics
    if (typeof gtag !== 'undefined') {
        gtag('event', 'video_play', {
            'movie_title': movieTitle,
            'movie_id': movieId
        });
    }
    
    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (typeof ym !== 'undefined') {
        ym(XXXXXXXX, 'reachGoal', 'video_play', {
            title: movieTitle,
            id: movieId
        });
    }
    
    console.log('üìä Tracked video play:', movieTitle);
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
let startTime = Date.now();
window.addEventListener('beforeunload', function() {
    let timeSpent = Math.round((Date.now() - startTime) / 1000); // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    
    if (typeof gtag !== 'undefined') {
        gtag('event', 'timing_complete', {
            'name': 'page_view',
            'value': timeSpent,
            'event_category': 'engagement'
        });
    }
});

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
window.addEventListener('error', function(e) {
    if (typeof gtag !== 'undefined') {
        gtag('event', 'exception', {
            'description': e.message,
            'fatal': false
        });
    }
});

console.log('üìä Analytics initialized!');
</script>

<!-- 
    –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –í –í–ê–®–ï–ú –ö–û–î–ï:
    
    1. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–∏–ª—å–º:
       trackMovieClick('–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä', 12345);
    
    2. –ü—Ä–∏ –ø–æ–∏—Å–∫–µ:
       trackSearch('–±–æ–µ–≤–∏–∫–∏ 2024', 15);
    
    3. –ü—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏:
       trackVideoPlay('–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä', 12345);
    
    4. –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ:
       gtag('event', 'custom_event', {'param': 'value'});
       ym(XXXXXXXX, 'reachGoal', 'custom_goal');
-->
