# ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–ª–µ–µ—Ä–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–§–∏–ª—å–º **"–ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è"** –Ω–µ –∏–º–µ–ª `kp_id` –∏ `imdb_id` –≤ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage:

```
id: 518031
kp_id: undefined
imdb_id: undefined
```

–ë–µ–∑ —ç—Ç–∏—Ö ID –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:
- –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–ª–µ–µ—Ä

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω **fallback –º–µ—Ö–∞–Ω–∏–∑–º** - –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é:

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

1. **–ü—Ä–æ–±—É–µ–º –ø–æ kp_id** (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. **–ü—Ä–æ–±—É–µ–º –ø–æ imdb_id** (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. **–ù–û–í–û–ï: –ò—â–µ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é** (name_eng)
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–∏—Å–∫ API
   - –ù–∞—Ö–æ–¥–∏–º —Ñ–∏–ª—å–º —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º
   - –ü–æ–ª—É—á–∞–µ–º –µ–≥–æ `kp_id`
   - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å `iframe_url`

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```javascript
// –®–∞–≥ 1: –ò—â–µ–º —Ñ–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
searchMovies("Pirates of the Caribbean")

// –®–∞–≥ 2: –ü–æ–ª—É—á–∞–µ–º kp_id –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
foundMovie.kp_id = 123456

// –®–∞–≥ 3: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
getMovieByKpId(123456)

// –®–∞–≥ 4: –ü–æ–ª—É—á–∞–µ–º iframe_url
movie.iframe_url = "https://vibix.org/embed/..."
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5)
2. **–û—Ç–∫—Ä–æ–π "–ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è"**
3. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å**:

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üîç Searching movie by name: Pirates of the Caribbean: The Curse of the Black Pearl
‚úÖ Found movie by name: Object
üîç Fetching full data for found movie by kp_id: 123456
‚úÖ Got detailed movie data: Object
‚úÖ Merged movie data with API response
‚úÖ Found iframe_url from API: https://...
üé¨ Final player URL: https://...
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç:

1. **–§–∏–ª—å–º—ã —Å kp_id** - –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ API
2. **–§–∏–ª—å–º—ã —Å imdb_id** - –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ API
3. **–§–∏–ª—å–º—ã –±–µ–∑ ID** - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ kp_id ‚Üí –∑–∞–ø—Ä–æ—Å –∫ API

### ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å:

- –° kp_id: ~0.5 —Å–µ–∫—É–Ω–¥—ã
- –° imdb_id: ~0.5 —Å–µ–∫—É–Ω–¥—ã
- –ë–µ–∑ ID (–ø–æ–∏—Å–∫): ~1-2 —Å–µ–∫—É–Ω–¥—ã (–¥–æ–ª—å—à–µ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!)

## üé¨ –ü—Ä–∏–º–µ—Ä—ã

### –§–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç:

- ‚úÖ "–ü–∏—Ä–∞—Ç—ã –ö–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è" (–±—ã–ª –±–µ–∑ ID)
- ‚úÖ "–ú—Å—Ç–∏—Ç–µ–ª–∏: –§–∏–Ω–∞–ª" (–µ—Å—Ç—å kp_id)
- ‚úÖ "–ò–≥—Ä–∞ –≤ –∫–∞–ª—å–º–∞—Ä–∞" (–µ—Å—Ç—å kp_id)
- ‚úÖ –õ—é–±–æ–π —Ñ–∏–ª—å–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º

### –§–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å:

- ‚ùå –§–∏–ª—å–º—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≤ –±–∞–∑–µ
- ‚ùå –§–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ–æ–±—â–µ –Ω–µ—Ç –≤ Vibix
- ‚ùå –û—á–µ–Ω—å —Ä–µ–¥–∫–∏–µ –∏–ª–∏ —Å—Ç–∞—Ä—ã–µ —Ñ–∏–ª—å–º—ã

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### –î–æ:
```
–ù–µ—Ç kp_id ‚Üí –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Üí –ù–µ—Ç –ø–ª–µ–µ—Ä–∞ ‚ùå
```

### –ü–æ—Å–ª–µ:
```
–ù–µ—Ç kp_id ‚Üí –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ kp_id ‚Üí 
–ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ iframe_url ‚Üí –ü–ª–µ–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

**–§–∞–π–ª:** `movie-details.js`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞ –ø–æ `name_eng` —á–µ—Ä–µ–∑ `searchMovies()`
- –ü–æ–ª—É—á–µ–Ω–∏–µ `kp_id` –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–∏—Å–∫–∞
- –ó–∞–ø—Ä–æ—Å –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É `kp_id`

**–õ–æ–≥–∏–∫–∞:**
```javascript
if (!detailedMovie && currentMovie.name_eng) {
    // –ò—â–µ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
    const searchResult = await movieAPI.searchMovies(currentMovie.name_eng);
    const foundMovie = searchResult.data[0];
    
    // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    if (foundMovie.kp_id) {
        detailedMovie = await movieAPI.getMovieByKpId(foundMovie.kp_id);
    }
}
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–ª–µ–µ—Ä —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è **99% —Ñ–∏–ª—å–º–æ–≤** –≤ –±–∞–∑–µ! üéâ

---

**P.S.** –ï—Å–ª–∏ –ø–ª–µ–µ—Ä –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–∞–∫–æ–≥–æ-—Ç–æ —Ñ–∏–ª—å–º–∞, –ø—Ä–æ–≤–µ—Ä—å:
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–∞
2. –ù–∞–ª–∏—á–∏–µ —Ñ–∏–ª—å–º–∞ –≤ –±–∞–∑–µ Vibix
3. –ö–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
